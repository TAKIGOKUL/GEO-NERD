// Converted data from Google Spreadsheet
// This data is based on the spreadsheet: https://docs.google.com/spreadsheets/d/1IcdG9d6VoTlICsVxWRGkHonJe759JeGv40qiWsEosiU/edit?gid=0#gid=0

export const spreadsheetLocations = [
  {
    id: 1,
    name: "Chefchaouen Blue Streets",
    category: "Cultural",
    country: "Morocco",
    city: "Chefchaouen",
    latitude: 35.1686,
    longitude: -5.2636,
    description: "A mountain town painted almost entirely blue, hidden in Morocco's Rif mountains.",
    wikipediaLink: "https://en.wikipedia.org/wiki/Chefchaouen",
    imageUrl: "https://en.wikipedia.org/wiki/Special:FilePath/Chefchaouen_%2852189357475%29.jpg",
    mapUrl: "https://maps.google.com/?q=35.1686,-5.2636",
    subcategory: 'General',
    continent: 'Africa',
    climate: 'Mediterranean',
    difficulty: 'Medium',
    culturalContext: 'A significant cultural landmark',
    historicalSignificance: 'Historically important location',
    bestVisitingTime: 'Year-round',
    localAttractions: 'Various local attractions'
  },
  {
    id: 2,
    name: "Hallstatt Village",
    category: "Town",
    country: "Austria",
    city: "Hallstatt",
    latitude: 47.5613,
    longitude: 13.6481,
    description: "A fairytale lakeside town in the Austrian Alps with wooden houses and mountain views.",
    wikipediaLink: "https://en.wikipedia.org/wiki/Hallstatt",
    imageUrl: "https://en.wikipedia.org/wiki/Special:FilePath/Hallstatt_-_Zentrum_.JPG",
    mapUrl: "https://maps.google.com/?q=47.5613,13.6481",
    subcategory: 'General',
    continent: 'Europe',
    climate: 'Alpine',
    difficulty: 'Easy',
    culturalContext: 'A significant cultural landmark',
    historicalSignificance: 'Historically important location',
    bestVisitingTime: 'Year-round',
    localAttractions: 'Various local attractions'
  },
  {
    id: 3,
    name: "Salar de Uyuni",
    category: "Natural",
    country: "Bolivia",
    city: "Uyuni",
    latitude: -20.1338,
    longitude: -67.4891,
    description: "The world's largest salt flat, becomes a giant mirror after rain.",
    wikipediaLink: "https://en.wikipedia.org/wiki/Salar_de_Uyuni",
    imageUrl: "https://en.wikipedia.org/wiki/Special:FilePath/Salar_Uyuni_au01.jpg",
    mapUrl: "https://maps.google.com/?q=-20.1338,-67.4891",
    subcategory: 'General',
    continent: 'South America',
    climate: 'Desert',
    difficulty: 'Medium',
    culturalContext: 'A significant cultural landmark',
    historicalSignificance: 'Historically important location',
    bestVisitingTime: 'Year-round',
    localAttractions: 'Various local attractions'
  },
  {
    id: 4,
    name: "Meteora Monasteries",
    category: "Historic",
    country: "Greece",
    city: "Thessaly",
    latitude: 39.721,
    longitude: 21.6306,
    description: "Monasteries perched atop towering rock pillars in central Greece.",
    wikipediaLink: "https://en.wikipedia.org/wiki/Meteora",
    imageUrl: "https://en.wikipedia.org/wiki/Special:FilePath/Meteora%27s_monastery_2.jpg",
    mapUrl: "https://maps.google.com/?q=39.7210,21.6306",
    subcategory: 'General',
    continent: 'Europe',
    climate: 'Mediterranean',
    difficulty: 'Medium',
    culturalContext: 'A significant cultural landmark',
    historicalSignificance: 'Historically important location',
    bestVisitingTime: 'Year-round',
    localAttractions: 'Various local attractions'
  },
  {
    id: 5,
    name: "Shirakawa-go",
    category: "Cultural",
    country: "Japan",
    city: "Gifu",
    latitude: 36.2596,
    longitude: 136.8986,
    description: "A UNESCO-listed village with steep thatched farmhouses in Japanese mountains.",
    wikipediaLink: "https://en.wikipedia.org/wiki/Shirakawa-go",
    imageUrl: "https://en.wikipedia.org/wiki/Special:FilePath/Ogi_Shirakawa-g%C5%8D,_Gifu,_Japan.jpg",
    mapUrl: "https://maps.google.com/?q=36.2596,136.8986",
    subcategory: 'General',
    continent: 'Asia',
    climate: 'Temperate',
    difficulty: 'Medium',
    culturalContext: 'A significant cultural landmark',
    historicalSignificance: 'Historically important location',
    bestVisitingTime: 'Year-round',
    localAttractions: 'Various local attractions'
  },
  {
    id: 6,
    name: "Colmar Old Town",
    category: "Town",
    country: "France",
    city: "Colmar",
    latitude: 48.079,
    longitude: 7.3585,
    description: "Colorful timber-framed houses and canals in Alsace, France.",
    wikipediaLink: "https://en.wikipedia.org/wiki/Colmar",
    imageUrl: "https://en.wikipedia.org/wiki/Special:FilePath/ColmarFrance.jpg",
    mapUrl: "https://maps.google.com/?q=48.0790,7.3585",
    subcategory: 'General',
    continent: 'Europe',
    climate: 'Temperate',
    difficulty: 'Easy',
    culturalContext: 'A significant cultural landmark',
    historicalSignificance: 'Historically important location',
    bestVisitingTime: 'Year-round',
    localAttractions: 'Various local attractions'
  },
  {
    id: 7,
    name: "Cappadocia Fairy Chimneys",
    category: "Natural",
    country: "Turkey",
    city: "Göreme",
    latitude: 38.6431,
    longitude: 34.8278,
    description: "Strange rock formations and cave dwellings famous for hot air balloons.",
    wikipediaLink: "https://en.wikipedia.org/wiki/Cappadocia",
    imageUrl: "https://en.wikipedia.org/wiki/Special:FilePath/Cappadocia_balloon_trip,_Ortahisar_Castle_%2811893715185%29.jpg",
    mapUrl: "https://maps.google.com/?q=38.6431,34.8278",
    subcategory: 'General',
    continent: 'Asia',
    climate: 'Continental',
    difficulty: 'Medium',
    culturalContext: 'A significant cultural landmark',
    historicalSignificance: 'Historically important location',
    bestVisitingTime: 'Year-round',
    localAttractions: 'Various local attractions'
  },
  {
    id: 8,
    name: "Plitvice Lakes",
    category: "Natural",
    country: "Croatia",
    city: "Lika-Senj",
    latitude: 44.88,
    longitude: 15.6167,
    description: "Terraced lakes and waterfalls with turquoise waters in Croatia.",
    wikipediaLink: "https://en.wikipedia.org/wiki/Plitvice_Lakes_National_Park",
    imageUrl: "https://en.wikipedia.org/wiki/Special:FilePath/View_in_Plitvice_Lakes_National_Park.jpg",
    mapUrl: "https://maps.google.com/?q=44.8800,15.6167",
    subcategory: 'General',
    continent: 'Europe',
    climate: 'Temperate',
    difficulty: 'Easy',
    culturalContext: 'A significant cultural landmark',
    historicalSignificance: 'Historically important location',
    bestVisitingTime: 'Year-round',
    localAttractions: 'Various local attractions'
  },
  {
    id: 9,
    name: "Banaue Rice Terraces",
    category: "Cultural",
    country: "Philippines",
    city: "Banaue",
    latitude: 16.9135,
    longitude: 121.0583,
    description: "Ancient rice terraces carved into the mountains by the Ifugao people.",
    wikipediaLink: "https://en.wikipedia.org/wiki/Banaue_Rice_Terraces",
    imageUrl: "https://en.wikipedia.org/wiki/Special:FilePath/Banaue-terrace.JPG",
    mapUrl: "https://maps.google.com/?q=16.9135,121.0583",
    subcategory: 'General',
    continent: 'Asia',
    climate: 'Tropical',
    difficulty: 'Medium',
    culturalContext: 'A significant cultural landmark',
    historicalSignificance: 'Historically important location',
    bestVisitingTime: 'Year-round',
    localAttractions: 'Various local attractions'
  },
  {
    id: 10,
    name: "Pamukkale Terraces",
    category: "Natural",
    country: "Turkey",
    city: "Denizli",
    latitude: 37.9244,
    longitude: 29.1202,
    description: "White travertine terraces formed by hot springs, also known as a Cotton Castle.",
    wikipediaLink: "https://en.wikipedia.org/wiki/Pamukkale",
    imageUrl: "https://en.wikipedia.org/wiki/Special:FilePath/Pamukkale_30.jpg",
    mapUrl: "https://maps.google.com/?q=37.9244,29.1202",
    subcategory: 'General',
    continent: 'Asia',
    climate: 'Mediterranean',
    difficulty: 'Easy',
    culturalContext: 'A significant cultural landmark',
    historicalSignificance: 'Historically important location',
    bestVisitingTime: 'Year-round',
    localAttractions: 'Various local attractions'
  },
  {
    id: 11,
    name: "Chefchaouen Rif Mountains",
    category: "Natural",
    country: "Morocco",
    city: "Chefchaouen",
    latitude: 35.17,
    longitude: -5.26,
    description: "The Rif mountain backdrop behind Morocco's blue pearl town.",
    wikipediaLink: "https://en.wikipedia.org/wiki/Rif",
    imageUrl: "https://en.wikipedia.org/wiki/Special:FilePath/Chauen.jpg",
    mapUrl: "https://maps.google.com/?q=35.1700,-5.2600",
    subcategory: 'General',
    continent: 'Africa',
    climate: 'Mediterranean',
    difficulty: 'Medium',
    culturalContext: 'A significant cultural landmark',
    historicalSignificance: 'Historically important location',
    bestVisitingTime: 'Year-round',
    localAttractions: 'Various local attractions'
  },
  {
    id: 12,
    name: "CERN Large Hadron Collider",
    category: "Science & Technology",
    country: "Switzerland",
    city: "Geneva",
    latitude: 46.233,
    longitude: 6.05,
    description: "World's largest particle physics laboratory, home to the LHC.",
    wikipediaLink: "https://en.wikipedia.org/wiki/CERN",
    imageUrl: "https://en.wikipedia.org/wiki/Special:FilePath/CERN-aerial_1.jpg",
    mapUrl: "https://maps.google.com/?q=46.233,6.05",
    subcategory: 'General',
    continent: 'Europe',
    climate: 'Temperate',
    difficulty: 'Hard',
    culturalContext: 'A significant cultural landmark',
    historicalSignificance: 'Historically important location',
    bestVisitingTime: 'Year-round',
    localAttractions: 'Various local attractions'
  },
  {
    id: 13,
    name: "Mauna Kea Observatories",
    category: "Science & Technology",
    country: "USA",
    city: "Hawaii",
    latitude: 19.8206,
    longitude: -155.4681,
    description: "Cluster of world-class observatories atop a dormant volcano.",
    wikipediaLink: "https://en.wikipedia.org/wiki/Mauna_Kea_Observatories",
    imageUrl: "https://en.wikipedia.org/wiki/Special:FilePath/Mauna_Kea_Summit_2021-06-16_33_%28cropped%29.jpg",
    mapUrl: "https://maps.google.com/?q=19.8206,-155.4681",
    subcategory: 'General',
    continent: 'North America',
    climate: 'Tropical',
    difficulty: 'Hard',
    culturalContext: 'A significant cultural landmark',
    historicalSignificance: 'Historically important location',
    bestVisitingTime: 'Year-round',
    localAttractions: 'Various local attractions'
  },
  {
    id: 14,
    name: "Baikonur Cosmodrome",
    category: "Science & Technology",
    country: "Kazakhstan",
    city: "Baikonur",
    latitude: 45.9647,
    longitude: 63.305,
    description: "Historic spaceport, first site to launch humans into space.",
    wikipediaLink: "https://en.wikipedia.org/wiki/Baikonur_Cosmodrome",
    imageUrl: "https://en.wikipedia.org/wiki/Special:FilePath/Baikonur_Cosmodrome_Soyuz_launch_pad.jpg",
    mapUrl: "https://maps.google.com/?q=45.9647,63.305",
    subcategory: 'General',
    continent: 'Asia',
    climate: 'Continental',
    difficulty: 'Hard',
    culturalContext: 'A significant cultural landmark',
    historicalSignificance: 'Historically important location',
    bestVisitingTime: 'Year-round',
    localAttractions: 'Various local attractions'
  },
  {
    id: 15,
    name: "SKA Observatory (South Africa)",
    category: "Science & Technology",
    country: "South Africa",
    city: "Northern Cape",
    latitude: -30.7211,
    longitude: 21.4106,
    description: "Part of the Square Kilometre Array, world's largest radio telescope project.",
    wikipediaLink: "https://en.wikipedia.org/wiki/Square_Kilometre_Array",
    imageUrl: "https://en.wikipedia.org/wiki/Special:FilePath/SKA_overview.jpg",
    mapUrl: "https://maps.google.com/?q=-30.7211,21.4106",
    subcategory: 'General',
    continent: 'Africa',
    climate: 'Desert',
    difficulty: 'Hard',
    culturalContext: 'A significant cultural landmark',
    historicalSignificance: 'Historically important location',
    bestVisitingTime: 'Year-round',
    localAttractions: 'Various local attractions'
  },
  {
    id: 16,
    name: "Arecibo Observatory Ruins",
    category: "Science & Technology",
    country: "Puerto Rico",
    city: "Arecibo",
    latitude: 18.3442,
    longitude: -66.7528,
    description: "Collapsed in 2020, once the world's largest radio telescope.",
    wikipediaLink: "https://en.wikipedia.org/wiki/Arecibo_Observatory",
    imageUrl: "https://en.wikipedia.org/wiki/Special:FilePath/Arecibo_radio_telescope_SJU_06_2019_6144.jpg",
    mapUrl: "https://maps.google.com/?q=18.3442,-66.7528",
    subcategory: 'General',
    continent: 'North America',
    climate: 'Tropical',
    difficulty: 'Hard',
    culturalContext: 'A significant cultural landmark',
    historicalSignificance: 'Historically important location',
    bestVisitingTime: 'Year-round',
    localAttractions: 'Various local attractions'
  },
  {
    id: 17,
    name: "Millau Viaduct",
    category: "Architecture & Engineering",
    country: "France",
    city: "Millau",
    latitude: 44.0692,
    longitude: 3.0228,
    description: "Tallest bridge in the world spanning the Tarn Valley.",
    wikipediaLink: "https://en.wikipedia.org/wiki/Millau_Viaduct",
    imageUrl: "https://en.wikipedia.org/wiki/Special:FilePath/ViaducdeMillau.jpg",
    mapUrl: "https://maps.google.com/?q=44.0692,3.0228",
    subcategory: 'General',
    continent: 'Europe',
    climate: 'Mediterranean',
    difficulty: 'Medium',
    culturalContext: 'A significant cultural landmark',
    historicalSignificance: 'Historically important location',
    bestVisitingTime: 'Year-round',
    localAttractions: 'Various local attractions'
  },
  {
    id: 18,
    name: "Lotus Temple",
    category: "Architecture & Engineering",
    country: "India",
    city: "Delhi",
    latitude: 28.5535,
    longitude: 77.2588,
    description: "Bahai House of Worship shaped like a blooming lotus flower.",
    wikipediaLink: "https://en.wikipedia.org/wiki/Lotus_Temple",
    imageUrl: "https://en.wikipedia.org/wiki/Special:FilePath/LotusDelhi.jpg",
    mapUrl: "https://maps.google.com/?q=28.5535,77.2588",
    subcategory: 'General',
    continent: 'Asia',
    climate: 'Continental',
    difficulty: 'Medium',
    culturalContext: 'A significant cultural landmark',
    historicalSignificance: 'Historically important location',
    bestVisitingTime: 'Year-round',
    localAttractions: 'Various local attractions'
  },
  {
    id: 19,
    name: "Turning Torso",
    category: "Architecture & Engineering",
    country: "Sweden",
    city: "Malmö",
    latitude: 55.6133,
    longitude: 12.9769,
    description: "Famous twisting skyscraper by Santiago Calatrava.",
    wikipediaLink: "https://en.wikipedia.org/wiki/Turning_Torso",
    imageUrl: "https://en.wikipedia.org/wiki/Special:FilePath/Turning_Torso2.jpg",
    mapUrl: "https://maps.google.com/?q=55.6133,12.9769",
    subcategory: 'General',
    continent: 'Europe',
    climate: 'Temperate',
    difficulty: 'Medium',
    culturalContext: 'A significant cultural landmark',
    historicalSignificance: 'Historically important location',
    bestVisitingTime: 'Year-round',
    localAttractions: 'Various local attractions'
  },
  {
    id: 20,
    name: "Hagia Sophia",
    category: "Architecture & Engineering",
    country: "Turkey",
    city: "Istanbul",
    latitude: 41.0086,
    longitude: 28.9802,
    description: "Architectural marvel blending Byzantine and Ottoman design.",
    wikipediaLink: "https://en.wikipedia.org/wiki/Hagia_Sophia",
    imageUrl: "https://en.wikipedia.org/wiki/Special:FilePath/Hagia_Sophia_Mars_2013.jpg",
    mapUrl: "https://maps.google.com/?q=41.0086,28.9802",
    subcategory: 'General',
    continent: 'Europe',
    climate: 'Mediterranean',
    difficulty: 'Easy',
    culturalContext: 'A significant cultural landmark',
    historicalSignificance: 'Historically important location',
    bestVisitingTime: 'Year-round',
    localAttractions: 'Various local attractions'
  }
];

// Function to ensure all locations have required properties
export const ensureLocationProperties = (location) => ({
  ...location,
  subcategory: location.subcategory || 'General',
  continent: location.continent || 'Unknown',
  climate: location.climate || 'Temperate',
  difficulty: location.difficulty || 'Medium',
  culturalContext: location.culturalContext || 'A significant cultural landmark',
  historicalSignificance: location.historicalSignificance || 'Historically important location',
  bestVisitingTime: location.bestVisitingTime || 'Year-round',
  localAttractions: location.localAttractions || 'Various local attractions'
});

// Game Mode Filters
export const getLocationsByMode = (locations, mode) => {
  switch (mode) {
    case 'tournament':
      return locations;
    case 'historical':
      return locations.filter(loc => loc.historicalSignificance && loc.historicalSignificance.length > 50);
    case 'explorer':
      return locations.filter(loc => loc.category === 'Natural');
    case 'cultural':
      return locations.filter(loc => loc.category === 'Cultural' || loc.subcategory === 'Street Scenes');
    case 'landmark':
      return locations.filter(loc => loc.subcategory === 'Monuments' || loc.subcategory === 'Landmarks');
    default:
      return locations;
  }
};

// Utility function to get random location based on game mode
export const getRandomLocation = (mode = 'tournament') => {
  const filteredLocations = getLocationsByMode(spreadsheetLocations, mode);
  const randomIndex = Math.floor(Math.random() * filteredLocations.length);
  const selectedLocation = filteredLocations[randomIndex];
  return ensureLocationProperties(selectedLocation);
};

// Utility function to calculate distance between two points
export const calculateDistance = (lat1, lon1, lat2, lon2) => {
  const R = 6371; // Earth's radius in kilometers
  const dLat = (lat2 - lat1) * Math.PI / 180;
  const dLon = (lon2 - lon1) * Math.PI / 180;
  const a = 
    Math.sin(dLat/2) * Math.sin(dLat/2) +
    Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * 
    Math.sin(dLon/2) * Math.sin(dLon/2);
  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
  return R * c;
};

// Enhanced scoring system with hints and bonuses
export const calculateScoreWithHints = (distance, hintLevel, timeBonus = 0, culturalBonus = 0, explorationBonus = 0, streakMultiplier = 1) => {
  const baseScore = Math.max(0, 100 - Math.floor(distance / 250));
  const hintPenalty = hintLevel * 10;
  const speedBonus = timeBonus; // Up to 20 points for sub-10 second guesses
  const finalScore = Math.max(0, (baseScore - hintPenalty + speedBonus + culturalBonus + explorationBonus) * streakMultiplier);
  // Cap the score at 100 points maximum per round
  return Math.min(100, Math.round(finalScore));
};

// AI-Driven Dynamic Hint System
export const getDynamicHint = (location, hintLevel, imageAnalysis = null) => {
  // Ensure location exists and has required properties
  if (!location) return null;

  const baseHints = [
    { level: 1, text: `Climate Zone: ${location.climate || 'Unknown'}`, penalty: 10 },
    { level: 2, text: `Continent: ${location.continent || 'Unknown'}`, penalty: 20 },
    { level: 3, text: `Country: ${location.country || 'Unknown'}`, penalty: 30 },
    { level: 4, text: `Near: ${location.city || 'Unknown'}`, penalty: 40 }
  ];

  // Enhanced hints based on image analysis
  if (imageAnalysis) {
    switch (hintLevel) {
      case 1:
        return { 
          ...baseHints[0], 
          text: `This region is known for ${(location.climate || 'temperate').toLowerCase()} climate and ${location.culturalContext ? location.culturalContext.split('.')[0] : 'unique cultural features'}.`,
          penalty: 10 
        };
      case 2:
        return { 
          ...baseHints[1], 
          text: `Located in ${location.continent || 'an unknown continent'}, this area is famous for ${location.historicalSignificance ? location.historicalSignificance.split('.')[0] : 'its historical significance'}.`,
          penalty: 20 
        };
      case 3:
        return { 
          ...baseHints[2], 
          text: `This is in ${location.country || 'an unknown country'}, known for ${location.culturalContext ? location.culturalContext.split('.')[0] : 'its rich culture'}.`,
          penalty: 30 
        };
      case 4:
        return { 
          ...baseHints[3], 
          text: `Near ${location.city || 'an unknown city'}, this location is ${location.bestVisitingTime ? `best visited ${location.bestVisitingTime}` : 'a must-see destination'}.`,
          penalty: 40 
        };
    }
  }

  return baseHints[hintLevel - 1] || null;
};